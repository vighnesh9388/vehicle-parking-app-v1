<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>
        {% block title %}
        ðŸš— Park-Karo! - Dashboard
        {% endblock %}
    </title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    {% block styles %}{% endblock %}
</head>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<body>
{% set is_admin = session.get('is_admin') %}
{% set current_path = request.path %}
<nav class="navbar navbar-expand-lg" style="background-color: #ffc800; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.264); position: relative;">
  <div class="container-fluid">
    {% if is_admin %}
    <a class="navbar-brand text-dark fw-bold" href="/admin/dashboard">ðŸš— Park-Karo!</a>
    <p class="text-danger lead ms-2 mb-0">Admin</p>
    {% else %}
    <a class="navbar-brand text-dark fw-bold" href="/user/dashboard">ðŸš— Park-Karo!</a>
    {% if user is defined %}
    <p class="text-dark lead ms-2 mb-0">Welcome, {{user.name}}</p>
    {% endif %}
    {% endif %}
    <div class="navbar-center position-absolute top-50 start-50 translate-middle">
      <ul class="navbar-nav d-flex flex-row gap-4">
      <li class="nav-item">
        <a class="nav-link fw-bold text-dark 
          {% if (is_admin and current_path == '/admin/dashboard') 
              or (not is_admin and current_path == '/user/dashboard') %}
              active bg-secondary rounded
          {% endif %}" 
          href="{{ '/admin/dashboard' if is_admin else '/user/dashboard' }}">
          Home
        </a>
      </li>
      {% if not is_admin %}
        <li class="nav-item">
          <a class="nav-link fw-bold text-dark {% if current_path == '/user/reservations' %}active bg-secondary rounded{% endif %}" href="/user/reservations">My Reservations</a>
        </li>
      {% endif %}

      {% if is_admin %}
        <li class="nav-item">
          <a class="nav-link fw-bold text-dark {% if current_path == '/admin/dashboard/users' %}active bg-secondary rounded{% endif %}" href="/admin/dashboard/users">Users</a>
        </li>
        <li class="nav-item">
          <a class="nav-link fw-bold text-dark {% if current_path == '/admin/dashboard/search' %}active bg-secondary rounded{% endif %}" href="/admin/dashboard/search">Search</a>
        </li>
      {% endif %}

      <li class="nav-item">
        <a class="nav-link fw-bold text-dark 
          {% if current_path == ('/admin/dashboard/summary' if is_admin else '/user/dashboard/summary') %}
            active bg-secondary rounded
          {% endif %}" 
          href="{{ '/admin/dashboard/summary' if is_admin else '/user/dashboard/summary' }}">
          Summary
        </a>
      </li>
      </ul>
    </div>
        
    <ul class="navbar-nav ms-auto ">
      <li class="nav-item dropdown">
        <a class="nav-link text-dark" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-person-fill"></i>
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
          <li><a class="dropdown-item" href="{{ url_for('auth.edit_profile') }}">Edit Profile</a></li>
          <li><a class="dropdown-item text-danger" href="/">Logout</a></li>
        </ul>
      </li>
    </ul>
  </div>
</nav>
{% with messages = get_flashed_messages() %}
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}
<div class="container mt-4">
    {% block content %}
    
    {% endblock %}
</div>
</body>
</html>

